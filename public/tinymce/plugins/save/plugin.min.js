tinymce.PluginManager.add("save",function(e){function t(){var t;t=tinymce.DOM.getParent(e.id,"form");if(!e.getParam("save_enablewhendirty",!0)||e.isDirty()){tinymce.triggerSave();if(e.getParam("save_onsavecallback")){if(e.execCallback("save_onsavecallback",e)){e.startContent=tinymce.trim(e.getContent({format:"raw"}));e.nodeChanged()}}else if(t){e.isNotDirty=!0;t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():e.windowManager.alert("Error: Form submit field collision."));e.nodeChanged()}else e.windowManager.alert("Error: No form element found.")}}function n(){var t=tinymce.trim(e.startContent);if(e.getParam("save_oncancelcallback"))e.execCallback("save_oncancelcallback",e);else{e.setContent(t);e.undoManager.clear();e.nodeChanged()}}function r(){var t=this;e.on("nodeChange",function(){t.disabled(e.getParam("save_enablewhendirty",!0)&&!e.isDirty())})}e.addCommand("mceSave",t);e.addCommand("mceCancel",n);e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:r});e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:r});e.addShortcut("Meta+S","","mceSave")});